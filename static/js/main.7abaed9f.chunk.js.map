{"version":3,"sources":["ChatActivity.js","lock.svg","GameRequest.js","JackboxGames.yaml","MessageHandler.js","Sidebar.js","dice.svg","star.svg","PlayerSelect.js","MainScreen.js","AuthenticatedApp.js","JackboxGameList.js","App.js","reportWebVitals.js","index.js"],"names":["fetch","require","ActivityStatus","ChatActivity","channel","updateLastMessageTime","user","lastMessageTimes","Date","now","minsSinceLastChatMessage","Math","floor","getChatters","then","r","json","res","chatters","moderators","viewers","staff","admins","global_mods","catch","e","this","getStatusPromise","bind","a","includes","GameRequest","props","deleteRequest","onDelete","gameName","getFormattedTimeDiff","timestamp","unit","timeDiff","getTooltipContents","statusClass","state","activityStatus","metadata","username","toggleLock","updateStatus","getActivity","setState","time","lockClassName","locked","cardStatus","chosen","className","effect","place","id","onMouseEnter","src","lock","alt","onClick","type","Component","tmi","GAME_REQUEST_COMMAND","MessageHandler","isModOrBroadcaster","modList","toLowerCase","checkForMiscCommands","message","startsWith","sendMessage","process","requestedGame","replace","trim","gameObj","findGame","name","partyPack","changeNextGameIdx","upcomingGames","length","numGamesAhead","setNextGame","caniplayHandler","sendConfirmationMsg","redeemingUser","isPrioritySeat","playerExitHandler","clearQueueHandler","openQueueHandler","closeQueueHandler","startGame","partyPackName","validGames","partyPackObj","Object","entries","formalGameName","Variants","longName","checkForGameCommand","onMessage","target","tags","msg","self","cleanedMsg","messages","prevRequestedGameName","values","addGameRequest","upcoming","i","client","say","identity","password","access_token","channels","on","connect","rawJackboxGameList","text","YAML","parse","Sidebar","getHistoryList","history","droppableId","provided","droppableProps","ref","innerRef","map","index","draggableId","draggableProps","dragHandleProps","printGame","placeholder","getNextGameName","hasNextGame","nextGameIdx","getNextGamePartyPack","handleOnDragEnd","result","destination","_items","Array","from","fill","splice","source","_reorderedItem","newNextGameIdx","findIndex","items","reorderedItem","changeGameOrder","moveNextGameFwd","moveNextGameBack","idx","buttonPlayerSelect","nextGame","requestMode","disabled","togglePlayerSelect","onDragEnd","PlayerSelect","updateColumnSizes","columnWidth","firstColumn","current","offsetWidth","handleNewPlayerRequest","column","isQueueOpen","updateColumnForUser","interested","uObj","playing","joined","userObj","newColumn","removeUser","filter","iObj","pObj","jObj","clearQueue","openQueue","closeQueue","playerCount","streamerSeat","toggleStreamerSeat","canStartGame","game","randomizePlayers","randIdx","randUsername","numPlayersToAdd","min","randIdxArray","randUsernameArray","random","push","renderPlayerCard","curColumn","star","style","maxWidth","renderStreamerSeatToggle","defaultChecked","onChange","renderPlayerCount","React","createRef","window","addEventListener","removeEventListener","startGameClass","dice","randomColor","MainScreen","delta","counter","stateCopy","override","slice","max","addGameToQueue","gameSelected","clearModal","onWheelSpun","gameLongName","gameRequestObj","requester","setTimeout","removeGame","chatActivity","status","messageHandler","newMessageObj","showPlayerSelect","routePlayRequest","playerSelector","routeLeaveRequest","routeOpenQueueRequest","routeCloseQueueRequest","routeClearQueueRequest","setMessageHandlerRef","ps","setPlayerSelectRef","mh","colors","count","luminosity","hue","requestedBy","confettiProps","force","duration","particleCount","floorHeight","outerWidth","outerHeight","floorWidth","gameSelectedModal","logOutBtn","gameRequestArray","keys","renderGameChosenModal","onLogout","innerContent","rightColumn","mainClassName","subheading","width","segments","segColors","onFinished","isOnlyOnce","size","upDuration","downDuration","primaryColor","contrastColor","fontFamily","AuthenticatedApp","localStorage","getItem","failed_login","getAuth","logOut","_isMounted","headers","Authorization","userInfo","setItem","data","login","modInfo","modObj","user_name","console","error","removeItem","requestParams","URLSearchParams","client_id","token","redirect_uri","method","Accept","location","reload","queryParams","queryString","search","grant_type","code","client_secret","oauth","to","mainContent","withRouter","PartyPackCard","gameList","possibleMatches","GameCard","possibleMatch","JackboxGameList","partyPackList","loginScreen","loginUrl","href","version","App","basename","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7abaed9f.chunk.js","sourcesContent":["const fetch = require('node-fetch');\n\nexport const ActivityStatus = {\n    ACTIVE: 1,\n    IDLE: 2,\n    DISCONNECTED: 3\n};\n\nconst MAX_IDLE_TIME_MINUTES = 10;\n\nexport default class ChatActivity {\n    constructor(channel) {\n        this.channel = channel;\n        this.lastMessageTimes = {};\n        this.getStatusPromise = this.getStatusPromise.bind(this);\n    }\n\n    updateLastMessageTime = (user) => {\n        this.lastMessageTimes = {\n            ...this.lastMessageTimes,\n            [user]: Date.now()\n        };\n    }\n\n    minsSinceLastChatMessage = (user) => {\n        return Math.floor((Date.now() - this.lastMessageTimes[user]) / 60000);\n    }\n\n    // returns a PROMISE, don't just assign the value again like a dweeb. :/\n    //\n    // not just active chatters - anyone with an active connnection to twitch chat.\n    // (thank the lord almighty for free open proxy sites. CORB is annoying.)\n    // note that results are fairly heavily cached, and the API may break\n    // eventually (is undocumented), but this is what twitch themselves\n    // uses to display the list of people connected to chat - best we got.\n    getChatters = () => {\n        return fetch(`https://thingproxy.freeboard.io/fetch/https://tmi.twitch.tv/group/user/${this.channel}/chatters`)\n            .then(r => r.json())\n            .then(res => {\n                if (!res || !res.chatters) return null;\n                return [\n                  ...res.chatters.moderators,\n                  ...res.chatters.viewers,\n                  ...res.chatters.staff,\n                  ...res.chatters.admins,\n                  ...res.chatters.global_mods\n                ];\n            }).catch((e) => {\n                // don't normally like swallowing errors like this,\n                // but it's a noncritical feature built off an\n                // undocumented api, sooo....\n                return null;\n            });\n    }\n\n    async getStatusPromise(user) {\n        // broadcaster always counts as active\n        if (user === this.channel) {\n            return ActivityStatus.ACTIVE;\n        }\n\n        // sent a chat message in the last X mins?\n        if (this.lastMessageTimes[user] && this.minsSinceLastChatMessage(user) < MAX_IDLE_TIME_MINUTES) {\n            return ActivityStatus.ACTIVE;\n        }\n\n        return this.getChatters().then((chatters) =>\n            !chatters || !chatters.includes(user)\n                ? ActivityStatus.DISCONNECTED\n                : ActivityStatus.IDLE\n        );\n    }\n}\n","export default __webpack_public_path__ + \"static/media/lock.6857c469.svg\";","import {ActivityStatus} from './ChatActivity';\nimport {Component} from 'react';\nimport './GameRequest.css';\nimport ReactTooltip from 'react-tooltip'\nimport lock from './lock.svg';\n\nexport default class GameRequest extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            timeDiff: 0,\n            activityStatus: null\n        };\n\n        this.deleteRequest = this.deleteRequest.bind(this);\n        this.getFormattedTimeDiff = this.getFormattedTimeDiff.bind(this);\n        this.getTooltipContents = this.getTooltipContents.bind(this);\n        this.toggleLock = this.toggleLock.bind(this);\n        this.updateStatus = this.updateStatus.bind(this);\n    }\n\n    deleteRequest = (e) => {\n        this.props.onDelete(this.props.gameName)\n    }\n\n    getFormattedTimeDiff = (timestamp) => {\n        let unit = \"minute\";\n        let timeDiff = Math.floor((Date.now() - timestamp) / 60000);\n        if (timeDiff === 0) {\n            return \"just now\";\n        }\n        if (timeDiff >= 60) {\n            unit = \"hour\";\n            timeDiff = Math.floor(timeDiff / 60);\n\n            if (timeDiff >= 24) {\n                unit = \"day\";\n                timeDiff = Math.floor(timeDiff / 24);\n            }\n        }\n        return `${timeDiff} ${unit}${timeDiff === 1 ? \"\" : \"s\"} ago`;\n    }\n\n    getTooltipContents = () => {\n        let statusClass = \"\";\n        switch (this.state.activityStatus) {\n            case ActivityStatus.ACTIVE:\n                statusClass = \"active\";\n                break;\n            case ActivityStatus.IDLE:\n                statusClass = \"idle\";\n                break;\n            case ActivityStatus.DISCONNECTED:\n                statusClass = \"disconnected\";\n                break;\n            default:\n                // no data back yet; don't show an activity status indicator at all\n                break;\n        }\n\n        return (`\n            <div class=\"tooltip\">\n                <p class=\"tooltipText\">\n                    Requested ${this.state.timeDiff} by ${this.props.metadata.username}\n                </p>\n                <div class=\"status ${statusClass}\" />\n            </div>`\n        );\n    }\n\n    toggleLock = () => {\n        this.props.toggleLock(this.props.gameName)\n    }\n\n    updateStatus = () => {\n        // return Date.now();\n        this.props.getActivity(this.props.metadata.username).then((activityStatus) => {\n            this.setState(() => {\n                return {\n                    ...this.state,\n                    timeDiff: this.getFormattedTimeDiff(this.props.metadata.time),\n                    activityStatus\n                };\n            });\n        })\n    }\n\n    render() {\n        const lockClassName = this.props.metadata.locked ? 'lock locked' : 'lock unlocked';\n        const cardStatus = this.props.metadata.chosen ? 'chosen' : 'pending';\n\n        return (\n            <div className=\"game-request-wrapper\">\n            \t<ReactTooltip effect=\"solid\" place=\"right\" />\n            \t<div id=\"baseDiv\"\n            \t\tclassName={`game-request ${cardStatus}`}\n            \t\tdata-tip={this.getTooltipContents()}\n            \t\tdata-html={true}\n            \t\tonMouseEnter={this.updateStatus}\n            \t>\n            \t\t<div className=\"game-request-body\">\n            \t\t    {this.props.gameName}\n            \t\t\t<div className=\"options\">\n            \t\t\t\t<img src={lock} alt=\"lock\" className={lockClassName} onClick={this.toggleLock} />\n            \t\t\t\t<button type='button' className=\"deleteButton\" onClick={this.deleteRequest}>X</button>\n            \t\t\t</div>\n            \t\t</div>\n            \t</div>\n            </div>\n        );\n    }\n}\n","export default __webpack_public_path__ + \"static/media/JackboxGames.39ad7cd1.yaml\";","import {Component} from 'react';\nimport YAML from 'yaml'\nimport rawJackboxGameList from './JackboxGames.yaml';\nconst fetch = require('node-fetch');\nconst tmi = require('tmi.js');\n\nconst GAME_REQUEST_COMMAND = \"!request\";\n\nexport default class MessageHandler extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            client: null,\n            validGames: []\n        };\n        this.isModOrBroadcaster = this.isModOrBroadcaster.bind(this);\n        this.checkForMiscCommands = this.checkForMiscCommands.bind(this);\n        this.findGame = this.findGame.bind(this);\n        this.checkForGameCommand = this.checkForGameCommand.bind(this);\n        this.onMessage = this.onMessage.bind(this);\n        this.sendMessage = this.sendMessage.bind(this);\n    }\n\n    componentDidMount(props) {\n        const client = new tmi.client({\n            identity: {\n                username: this.props.channel,\n                password: this.props.access_token\n            },\n            channels: [\n                this.props.channel\n            ]\n        });\n\n        client.on('message', this.onMessage);\n        client.connect();\n\n        fetch(rawJackboxGameList)\n            .then(r => r.text())\n            .then(text => {\n                this.setState((state) => {\n                    return {\n                        ...state,\n                        client,\n                        validGames: YAML.parse(text)\n                    };\n                });\n            })\n    }\n\n    isModOrBroadcaster = (username) => {\n        return (this.props.channel === username || this.props.modList.includes(username.toLowerCase()));\n    }\n\n    // returns true iff a known command was found & responded to\n    checkForMiscCommands = (message, username) => {\n        //========= general =========\n        if (message.startsWith(\"!gamelist\") || message.startsWith(\"!gameslist\")) {\n            this.sendMessage(`/me @${username}, click here for a list of valid Jackbox games: ${process.env.REACT_APP_REDIRECT_URI_NOENCODE}/gamelist`);\n            return true;\n        }\n\n        if (message === \"!wheelcommands\") {\n            this.sendMessage(`/me @${username}, click here to read about all supported commands: https://github.com/asukii314/twitch-request-wheel/blob/master/src/Commands.yaml`);\n            return true;\n        }\n\n        if (message.startsWith(\"!whichpack\")) {\n            const requestedGame = message.replace(\"!whichpack\", \"\").trim();\n            if (requestedGame === \"\") {\n                this.sendMessage(`/me @${username}, please specify the game you would like to look up the party pack for: e.g. !whichpack TMP 2`);\n                return true;\n            }\n\n            const gameObj = this.findGame(requestedGame, username);\n            if (gameObj) {\n                this.sendMessage(`/me @${username}, ${gameObj.name} is a ${gameObj.partyPack} game.`);\n            }\n            return true;\n        }\n\n        //========= advance next game =========\n        if (message === \"!advancenextgame\" || message === \"!nextgamefwd\" || message === \"!nextgameforward\") {\n            if (!this.isModOrBroadcaster(username)) {\n                this.sendMessage(`/me @${username}, only channel moderators can use this command.`);\n                return true;\n            }\n            if (this.props.changeNextGameIdx(1)) {\n                if (this.props.upcomingGames.length > 0) {\n                    // console.log(this.props.upcomingGames)\n                    this.sendMessage(`/me @${username}, the next game has been changed to ${this.props.upcomingGames[0].name}.`);\n                } else {\n                    this.sendMessage(`/me @${username}, the next game has been marked as \"TBD\".`);\n                }\n            } else {\n                this.sendMessage(`/me @${username}, there are no more games in the queue to advance to!`);\n            }\n            return true;\n        }\n\n        //========= advance prev game =========\n        if (message === \"!nextgameback\" || message === \"!nextgamebackward\") {\n            if (!this.isModOrBroadcaster(username)) {\n                this.sendMessage(`/me @${username}, only channel moderators can use this command.`);\n                return true;\n            }\n            if (this.props.changeNextGameIdx(-1)) {\n                this.sendMessage(`/me @${username}, the next game has been changed to ${this.props.upcomingGames[0].name}.`);\n            } else {\n                this.sendMessage(`/me @${username}, there are no previous games in the queue to go back to!`);\n            }\n            return true;\n        }\n\n        //========= set next game =========\n        if (message.startsWith(\"!setnextgame\") || message.startsWith(\"!redeemgame\")) {\n            if (!this.isModOrBroadcaster(username)) {\n                this.sendMessage(`/me @${username}, only channel moderators can use the ${message.startsWith(\"!s\") ? \"!setNextGame\" : \"!redeemgame\"} command.`);\n                return true;\n            }\n\n            const requestedGame = message.replace(\"!setnextgame\", \"\").replace(\"!redeemgame\", \"\").trim();\n            if (requestedGame === \"\") {\n                this.sendMessage(`/me @${username}, please specify the game you would like to insert in the queue: for example, ${message.startsWith(\"!s\") ? \"!setNextGame\" : \"!redeemgame\"} TMP 2`);\n                return true;\n            }\n\n            const gameObj = this.findGame(requestedGame, username);\n            if (gameObj) {\n                const numGamesAhead = this.props.setNextGame(gameObj);\n                if (numGamesAhead === 0) {\n                    this.sendMessage(`/me @${username}, ${gameObj.name} has been inserted as the next game in the queue.`);\n                } else {\n                    this.sendMessage(`/me @${username}, ${gameObj.name} has been inserted in the queue following ${numGamesAhead} other manual game request${numGamesAhead > 1 ? 's' : ''}.`);\n                }\n\n            }\n            return true;\n        }\n\n        //========= player queue management =========\n        if (message === \"!caniplay\" || message === \"!new\") {\n            this.props?.caniplayHandler(username, {\n                sendConfirmationMsg: message !== \"!new\"\n            });\n            return true;\n        }\n\n        if (message.startsWith(\"!priorityseat\") || message.startsWith(\"!redeemseat\")) {\n            if (!this.isModOrBroadcaster(username)) {\n                this.sendMessage(`/me @${username}, only channel moderators can use this command.`);\n                return true;\n            }\n            const redeemingUser = message.replace(\"!priorityseat\", \"\").replace(\"!redeemseat\", \"\").replace(\"@\", \"\").trim();\n            if (redeemingUser === \"\") {\n                this.sendMessage(`/me @${username}, please specify the user who has redeemed a priority seat in the next game: for example, ${message.startsWith(\"!p\") ? \"!priorityseat\" : \"!redeemseat\"} @asukii314`);\n                return true;\n            }\n            this.props?.caniplayHandler(redeemingUser, {\n                sendConfirmationMsg: true,\n                isPrioritySeat: true\n            });\n            return true;\n        }\n\n        if (message === \"!leave\" || message === \"!murd\") {\n            this.props?.playerExitHandler(username);\n            return true;\n        }\n\n        if (message === \"!clear\") {\n            if (this.isModOrBroadcaster(username)) {\n                this.props?.clearQueueHandler();\n            }\n            return true;\n        }\n\n        if (message === \"!open\") {\n            if (this.isModOrBroadcaster(username)) {\n                this.props?.openQueueHandler();\n            }\n            return true;\n        }\n\n        if (message === \"!close\") {\n            if (this.isModOrBroadcaster(username)) {\n                this.props?.closeQueueHandler();\n            }\n            return true;\n        }\n\n        if (message === \"!startgame\") {\n            if (!this.isModOrBroadcaster(username)) {\n                this.sendMessage(`/me @${username}, only channel moderators can use this command.`);\n                return true;\n            }\n            if (this.props.startGame()) {\n                this.sendMessage(`/me @${username}, the game has been started.`);\n            } else {\n                this.sendMessage(`/me @${username}, the game was already started.`);\n            }\n            return true;\n        }\n\n        if (message.startsWith(\"!redeem\")) {\n            this.sendMessage(`/me @${username}, this command is no longer supported: please specify either !redeemgame or !redeemseat.`);\n            return true;\n        }\n        return;\n    }\n\n    findGame = (requestedGame, username) => {\n        for (let partyPackName in this.state.validGames) {\n            const partyPackObj = this.state.validGames[partyPackName]\n            for (const [formalGameName, metadata] of Object.entries(partyPackObj)) {\n                if (metadata?.Variants?.includes(requestedGame)) {\n                    return {\n                        name: formalGameName,\n                        longName: `${formalGameName} (${partyPackName})`,\n                        partyPack: partyPackName,\n                        ...metadata\n                    };\n                }\n            }\n        }\n        this.sendMessage(`/me @${username}, ${requestedGame} could not be found in the list of valid Jackbox games. Click here for a list of valid games: ${process.env.REACT_APP_REDIRECT_URI_NOENCODE}/gamelist`);\n        return;\n    }\n\n    checkForGameCommand = (message, username) => {\n        if (!message.startsWith(GAME_REQUEST_COMMAND)) return;\n\n        const requestedGame = message.replace(GAME_REQUEST_COMMAND, \"\").trim();\n\n        if (requestedGame === \"\") {\n            this.sendMessage(`/me @${username}, please specify the game you would like to request: for example, !request TMP 2`);\n            return null;\n        }\n\n        return this.findGame(requestedGame, username);\n    }\n\n    onMessage = (target, tags, msg, self) => {\n        if (self) return;\n        this.props.onMessage(msg, tags.username, tags)\n\n        if (msg.trim() === \"!nextgame\") {\n            if (this.props.upcomingGames && this.props.upcomingGames.length > 0) {\n                let upcoming = this.props.upcomingGames[0].name;\n                if (this.props.upcomingGames.length > 1) {\n                    upcoming += `, followed by ${this.props.upcomingGames[1].name}`\n                    for (let i = 2; i < this.props.upcomingGames.length; i++) {\n                        upcoming += ` and ${this.props.upcomingGames[i].name}`\n                    }\n                }\n                this.sendMessage(`/me @${tags.username}, the next game up is ${upcoming}!`)\n            } else {\n                this.sendMessage(`/me @${tags.username}, the next game hasn't been decided yet - feel free to !request one :)`)\n            }\n\n            return;\n        }\n\n        const cleanedMsg = msg.trim().toLowerCase();\n        if (this.checkForMiscCommands(cleanedMsg, tags.username)) return;\n        const gameObj = this.checkForGameCommand(cleanedMsg, tags.username);\n        if (!gameObj) return;\n\n        if (this.props.messages[gameObj.longName]) {\n            this.sendMessage(`/me @${tags.username}, ${gameObj.name} has already been requested!`);\n            return;\n        }\n\n        let prevRequestedGameName = null;\n        for (const metadata of Object.values(this.props.messages)) {\n            if (metadata.username === tags.username) {\n                prevRequestedGameName = metadata.longName;\n                break;\n            }\n        }\n\n        if (prevRequestedGameName) {\n            if (this.props.channel === tags.username) {\n                this.sendMessage(`/me @${tags.username}, ${gameObj.name} has been added to the request queue. Your previous game request(s) weren't deleted, since you have special broadcaster privilege :P`);\n            } else {\n                this.props.onDelete(prevRequestedGameName);\n                this.sendMessage(`/me @${tags.username}, your previous request of ${prevRequestedGameName} has been replaced with ${gameObj.name}.`);\n            }\n        } else {\n            this.sendMessage(`/me @${tags.username}, ${gameObj.name} has been added to the request queue.`);\n        }\n\n        this.props.addGameRequest(gameObj, tags.username);\n    }\n\n    sendMessage = (msg) => {\n        this.state.client.say(this.props.channel, msg)\n    }\n\n    render() {\n        return null;\n    }\n}\n","import { Component } from 'react';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\n\nimport './Sidebar.css';\n\nexport default class Sidebar extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            index: 0\n        }\n\n        this.getHistoryList = this.getHistoryList.bind(this);\n        this.getNextGameName = this.getNextGameName.bind(this);\n        this.getNextGamePartyPack = this.getNextGamePartyPack.bind(this);\n        this.hasNextGame = this.hasNextGame.bind(this);\n        this.moveNextGameBack = this.moveNextGameBack.bind(this);\n        this.moveNextGameFwd = this.moveNextGameFwd.bind(this);\n        this.printGame = this.printGame.bind(this);\n    }\n\n    getHistoryList = (history) => {\n        if (history.length === 0) {\n            return (\n                <li key='placeholder'>No games yet</li>\n            );\n        }\n        return (\n            <Droppable droppableId=\"historyList\">\n                {(provided) => (\n                    <span className=\"historyList\" {...provided.droppableProps} ref={provided.innerRef}>\n                        {history.map(({name, time}, index) => {\n                            return (\n                                <Draggable key={`${time}`} draggableId={`${time}`} index={index}>\n                                    {(provided) => (\n                                        <li ref={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps}>\n                                            {this.printGame(index)}\n                                        </li>\n                                    )}\n                                </Draggable>\n                            );\n                        })}\n                        {provided.placeholder}\n                    </span>\n                )}\n            </Droppable>\n        );\n    }\n\n    getNextGameName = () => {\n        return this.hasNextGame()\n            ? this.props.history[this.props.nextGameIdx].name\n            : 'not yet decided';\n    }\n\n    getNextGamePartyPack = () => {\n        return this.hasNextGame()\n            ? this.props.history[this.props.nextGameIdx].partyPack\n            : null;\n    }\n\n    handleOnDragEnd = (result) => {\n        if (!result.destination) return;\n\n        const _items = Array.from(this.props.history).fill();\n        _items[this.props.nextGameIdx] = true;\n        const [_reorderedItem] = _items.splice(result.source.index, 1);\n        _items.splice(result.destination.index, 0, _reorderedItem);\n\n        const newNextGameIdx = _items.findIndex(i => i);\n\n        const items = Array.from(this.props.history);\n        const [reorderedItem] = items.splice(result.source.index, 1);\n        items.splice(result.destination.index, 0, reorderedItem);\n\n        this.props.changeGameOrder(items, newNextGameIdx);\n    }\n\n    hasNextGame = () => {\n        return this.props.history.length > this.props.nextGameIdx;\n    }\n\n    moveNextGameFwd = () => {\n        return this.props.changeNextGameIdx(1);\n    }\n\n    moveNextGameBack = () => {\n        return this.props.changeNextGameIdx(-1);\n    }\n\n    printGame = (idx) => {\n        if (idx === this.props.nextGameIdx) {\n            return (\n                <b>{this.props.history[idx].name}</b>\n            );\n        }\n        return this.props.history[idx].name;\n    }\n\n    render() {\n        let nextGame = this.hasNextGame();\n\n        let buttonPlayerSelect;\n        switch (this.props.requestMode) {\n            case 'game':\n                buttonPlayerSelect = (\n                    <button className=\"open-seat-requests\" disabled={!nextGame} onClick={this.props.togglePlayerSelect}>\n                        OPEN SEAT REQUESTS\n                    </button>\n                )\n                break;\n            case 'seat':\n                buttonPlayerSelect = (\n                    <button className=\"return-to-wheel\" onClick={this.props.togglePlayerSelect}>\n                        RETURN TO WHEEL\n                    </button>\n                )\n                break;\n            default:\n                break;\n        }\n\n        return (\n            <div id=\"sidebar\" className={this.props.requestMode}>\n                <div className=\"sidebar-panel\">\n                    <div className=\"p sidebar-panel-up-next\"> Up Next:\n\n                        <p className=\"next-game-name\">\n                            {this.getNextGameName()}\n                        </p>\n\n                        <p className=\"next-game-party-pack\">\n                            <i>{this.getNextGamePartyPack()}</i>\n                        </p>\n\n                        {buttonPlayerSelect}\n                    </div>\n                </div>\n\n                <div className=\"nav-wrapper\">\n                    <button className=\"move-next-game-back\" onClick={this.moveNextGameBack}> &#8678; </button>\n                    <button className=\"move-next-game-fwd\" onClick={this.moveNextGameFwd}> &#8680; </button>\n                </div>\n\n                <div className=\"sidebar-panel\">\n                    <DragDropContext onDragEnd={this.handleOnDragEnd}>\n                        <p className=\"sidebar-panel-history\"> History </p>\n                        <p className=\"sidebar-panel-history-list\">\n                            {this.getHistoryList(this.props.history)}\n                        </p>\n                    </DragDropContext>\n                </div>\n            </div>\n        );\n    }\n}\n","export default __webpack_public_path__ + \"static/media/dice.021a7158.svg\";","export default __webpack_public_path__ + \"static/media/star.de82f684.svg\";","import React, { Component } from 'react';\r\nimport './playerSelect.css';\r\nimport dice from './dice.svg';\r\nimport star from './star.svg';\r\n\r\nexport default class PlayerSelect extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.firstColumn = React.createRef();\r\n        this.state = {\r\n            interested: [],\r\n            playing: [],\r\n            joined: [],\r\n            streamerSeat: false,\r\n            isQueueOpen: true\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.updateColumnSizes();\r\n        window.addEventListener(\"resize\", this.updateColumnSizes);\r\n        return;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('resize', this.updateColumnSizes);\r\n        return;\r\n    }\r\n\r\n    updateColumnSizes = () => {\r\n        this.setState((state) => {\r\n            return {\r\n                ...state,\r\n                columnWidth: this.firstColumn.current.offsetWidth\r\n            };\r\n        })\r\n    }\r\n\r\n    handleNewPlayerRequest = (username, {isPrioritySeat=false}) => {\r\n        if (isPrioritySeat) {\r\n            // even if the queue is closed, still add them to the interested column for consideration\r\n            const column = (this.state.isQueueOpen ? 'playing' : 'interested');\r\n\r\n            return this.updateColumnForUser({username, isPrioritySeat}, column)\r\n                ? 'you have been successfully added to the lobby.'\r\n                : 'there was an error adding you to the lobby.';\r\n        }\r\n\r\n        if (this.state?.interested?.map((uObj) => uObj.username)?.includes(username)\r\n        || this.state?.playing?.map((uObj) => uObj.username)?.includes(username)\r\n        || this.state?.joined?.map((uObj) => uObj.username)?.includes(username)) {\r\n            return 'you are already in the lobby.';\r\n        }\r\n\r\n        if (!this.state.isQueueOpen) {\r\n            return 'the queue is currently closed; users have already been selected for this game.';\r\n        }\r\n        return this.updateColumnForUser({username}, 'interested')\r\n            ? 'you have successfully joined the lobby.'\r\n            : 'there was an error adding you to the lobby.';\r\n    }\r\n\r\n    updateColumnForUser = (userObj, newColumn) => {\r\n        if (!this.state || !this.state[newColumn]) return false;\r\n\r\n        this.removeUser(userObj.username);\r\n        this.setState((state) => {\r\n            return {\r\n                ...state,\r\n                [newColumn]: [\r\n                    ...state[newColumn],\r\n                    userObj\r\n                ]\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n\r\n    removeUser = (username) => {\r\n        return this.setState((state) => {\r\n            return {\r\n                ...state,\r\n                interested: state.interested.filter((iObj) => iObj.username !== username),\r\n                playing: state.playing.filter((pObj) => pObj.username !== username),\r\n                joined:  state.joined.filter((jObj) => jObj.username !== username)\r\n            }\r\n        });\r\n    }\r\n\r\n    clearQueue = () => {\r\n        return this.setState((state) => {\r\n            return {\r\n                ...state,\r\n                interested: [],\r\n                playing: [],\r\n                joined: []\r\n            }\r\n        })\r\n    }\r\n\r\n    openQueue = () => {\r\n        return this.setState((state) => {\r\n            return {\r\n                ...state,\r\n                isQueueOpen: true\r\n            }\r\n        })\r\n    }\r\n\r\n    closeQueue = () => {\r\n        return this.setState((state) => {\r\n            return {\r\n                ...state,\r\n                isQueueOpen: false\r\n            }\r\n        })\r\n    }\r\n\r\n    playerCount = () => {\r\n        return this.state.playing.length + this.state.joined.length +\r\n                        (this.state.streamerSeat ? 1 : 0);\r\n    }\r\n\r\n    toggleStreamerSeat = () => {\r\n        this.setState((state) => {\r\n            return {\r\n                ...state,\r\n                streamerSeat: !state.streamerSeat\r\n            }\r\n        });\r\n    }\r\n\r\n    canStartGame = () => {\r\n        return this.props.game?.['Max players'] >= this.playerCount() &&\r\n                     this.props.game?.['Min players'] <= this.playerCount();\r\n    }\r\n\r\n    startGame = () => {\r\n        // clear for now; eventually, save elsewhere to report on user play history for that session\r\n        this.setState ((state) => {\r\n            return {\r\n                ...state,\r\n                interested: [],\r\n                playing: [],\r\n                joined: []\r\n            };\r\n        })\r\n        this.props.startGame();\r\n    }\r\n\r\n    randomizePlayers = () => {\r\n        const numPlayersToAdd = Math.min(\r\n            this.props.game['Max players'] - this.playerCount(),\r\n            this.state.interested.length\r\n        );\r\n\r\n        let randIdx, randUsername;\r\n        let randIdxArray = [], randUsernameArray = [];\r\n        // let interested = this.state.interested;\r\n        let playing = this.state.playing;\r\n\r\n        while(randIdxArray.length < numPlayersToAdd) {\r\n            randIdx = Math.floor(Math.random() * this.state.interested.length);\r\n            if (!randIdxArray.includes(randIdx)) {\r\n                randIdxArray.push(randIdx);\r\n                randUsername = this.state.interested[randIdx].username;\r\n                randUsernameArray.push(randUsername);\r\n                playing = [\r\n                    ...playing,\r\n                    this.state.interested[randIdx]\r\n                ];\r\n            }\r\n        }\r\n        this.setState((state) => {\r\n            return {\r\n                ...state,\r\n                interested: state.interested.filter((uObj) => !randUsernameArray.includes(uObj.username)),\r\n                playing\r\n            }\r\n        })\r\n    }\r\n\r\n    renderPlayerCard = (userObj, id, curColumn) => {\r\n        return (\r\n            <div key={id} className='playerCard'>\r\n                <div className=\"playerCard-username\">\r\n                    {userObj.isPrioritySeat === true && <img src={star} alt=\"Priority seat redemption\"/>}\r\n                    <p className='playerName' style={{maxWidth: this.state.columnWidth - 25}}>{userObj.username}</p>\r\n                </div>\r\n                <div className='changeColButtonsContainer'>\r\n                    {curColumn !== 'interested' && <button className='changeCol' onClick={this.updateColumnForUser.bind(this, userObj, 'interested')}>Interested</button>}\r\n                    {curColumn !== 'playing' && <button className='changeCol' onClick={this.updateColumnForUser.bind(this, userObj, 'playing')}>Playing</button>}\r\n                    {/*curColumn !== 'joined' && <button className='changeCol' onClick={this.updateColumnForUser.bind(this, userObj, 'joined')}>Joined</button>*/}\r\n                    <button className='changeCol' onClick={this.removeUser.bind(this, userObj.username)}>X</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderStreamerSeatToggle = () => {\r\n        return (\r\n            <div className='my-toggle-group'>\r\n                <p className='toggle-label'>\r\n                    Reserve seat for streamer?\r\n                </p>\r\n                <div className='my-toggle'>\r\n                    <input type=\"checkbox\" defaultChecked={true} onChange={this.toggleStreamerSeat}/>\r\n                    <div className='my-toggle-text no' aria-hidden=\"true\">No</div>\r\n                    <div className='my-toggle-text yes' aria-hidden=\"true\">Yes</div>\r\n                    <div className='my-toggle-orb'></div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderPlayerCount = () => {\r\n        let className = 'playerCount';\r\n        if (this.props.game?.['Max players'] < this.playerCount()) {\r\n            className += ' overlimit';\r\n        }\r\n        return (\r\n            <p className={className}>\r\n                {this.playerCount()} of {this.props.game?.['Max players']} seats claimed\r\n            </p>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        let startGameClass = 'startGame';\r\n        if (this.playerCount() < this.props.game?.['Min players']){\r\n            startGameClass += ' disabled';\r\n        }\r\n\r\n        return (\r\n            <div className='playerSelectContainer'>\r\n                <div className=\"header\">\r\n                    {this.renderStreamerSeatToggle()}\r\n                    <div className=\"game-name\">\r\n                        <b>{this.props.game?.name ?? \"TBD\"}</b>\r\n                        {this.renderPlayerCount()}\r\n                    </div>\r\n                    <button className={startGameClass} onClick={this.startGame} disabled={!this.canStartGame()}>Start Game</button>\r\n                </div>\r\n                <div className='playerCardContainer'>\r\n                    <div ref={this.firstColumn} className='playerCardColumn interested'>\r\n                        <p className=\"playerCardColumn-header\">Interested</p>\r\n                        {this.state.interested.filter((iObj) => iObj.isPrioritySeat).map((userObj, i) => this.renderPlayerCard(userObj, i, 'interested') )}\r\n                        {this.state.interested.filter((iObj) => !iObj.isPrioritySeat).map((userObj, i) => this.renderPlayerCard(userObj, i, 'interested') )}\r\n                    </div>\r\n\r\n                    <div className='playerCardColumn playing'>\r\n                        <p className=\"playerCardColumn-header\">Playing\r\n                        <button className=\"dice\" onClick={this.randomizePlayers}>\r\n                            <img src={dice} alt=\"dice icon\"/>\r\n                        </button>\r\n                        </p>\r\n                        {this.state.playing.filter((iObj) => iObj.isPrioritySeat).map((userObj, i) => this.renderPlayerCard(userObj, i, 'playing') )}\r\n                        {this.state.playing.filter((iObj) => !iObj.isPrioritySeat).map((userObj, i) => this.renderPlayerCard(userObj, i, 'playing') )}\r\n                    </div>\r\n\r\n                    {/*<div className='playerCardColumn joined'>\r\n                        <p className=\"playerCardColumn-header\">Joined</p>\r\n                        {this.state.joined.filter((iObj) => iObj.isPrioritySeat).map((userObj, i) => this.renderPlayerCard(userObj, i, 'joined') )}\r\n                        {this.state.joined.filter((iObj) => !iObj.isPrioritySeat).map((userObj, i) => this.renderPlayerCard(userObj, i, 'joined') )}\r\n                    </div>*/}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import { Component } from 'react';\nimport ConfettiExplosion from '@reonomy/react-confetti-explosion';\nimport WheelComponent from 'react-wheel-of-prizes'\nimport GameRequest from './GameRequest'\nimport MessageHandler from './MessageHandler';\nimport Sidebar from './Sidebar'\nimport PlayerSelect from './PlayerSelect';\nimport ChatActivity, { ActivityStatus } from './ChatActivity';\n\nimport './MainScreen.css';\nconst randomColor = require('randomcolor');\n\n\nexport default class MainScreen extends Component {\n    constructor(props){\n        super(props);\n        this.chatActivity = new ChatActivity(this.props.channel)\n        this.state = {\n            gameSelected: null,\n            messages: {},\n            colors: randomColor({count: 99, luminosity: 'light', hue: 'blue'}),\n            counter: 0,\n            history: [],\n            nextGameIdx: 0,\n            showPlayerSelect: false\n        };\n\n        this.playerSelector = null;\n        this.messageHandler = null;\n\n        this.changeNextGameIdx = this.changeNextGameIdx.bind(this);\n        this.moveNextGameFwd = this.moveNextGameFwd.bind(this);\n        this.moveNextGameBack = this.moveNextGameBack.bind(this);\n        this.addGameRequest = this.addGameRequest.bind(this);\n        this.toggleLock = this.toggleLock.bind(this);\n        this.setNextGame = this.setNextGame.bind(this);\n        this.addGameToQueue = this.addGameToQueue.bind(this);\n        this.onWheelSpun = this.onWheelSpun.bind(this);\n        this.removeGame = this.removeGame.bind(this);\n        this.onMessage = this.onMessage.bind(this);\n        this.togglePlayerSelect = this.togglePlayerSelect.bind(this);\n        this.routePlayRequest = this.routePlayRequest.bind(this);\n        this.routeLeaveRequest = this.routeLeaveRequest.bind(this);\n        this.routeOpenQueueRequest = this.routeOpenQueueRequest.bind(this);\n        this.routeCloseQueueRequest = this.routeCloseQueueRequest.bind(this);\n        this.routeClearQueueRequest = this.routeClearQueueRequest.bind(this);\n        this.startGame = this.startGame.bind(this);\n        this.setMessageHandlerRef = this.setMessageHandlerRef.bind(this);\n        this.setPlayerSelectRef = this.setPlayerSelectRef.bind(this);\n    }\n\n    changeNextGameIdx = (delta = 1) => {\n        if (this.state.nextGameIdx + delta > this.state.history.length) return false;\n        if (this.state.nextGameIdx + delta < 0) return false;\n        this.setState((state) => {\n            return {\n                ...this.state,\n                nextGameIdx: state.nextGameIdx + delta\n            }\n        });\n        return true;\n    }\n\n    changeGameOrder = (history, nextGameIdx) => {\n        if (nextGameIdx > history.length) return false;\n        this.setState({\n            history,\n            nextGameIdx\n        });\n        return true;\n    }\n\n    moveNextGameFwd = () => {\n        return this.changeNextGameIdx();\n    }\n\n    moveNextGameBack = () => {\n        return this.changeNextGameIdx(-1);\n    }\n\n    addGameRequest = (gameObj, user) => {\n        this.setState((state) => {\n            return {\n                ...state,\n                messages: {\n                    ...this.state.messages,\n                    [gameObj.longName]: {\n                        ...gameObj,\n                        username: user,\n                        time: Date.now(),\n                        locked: false,\n                        chosen: false\n                    }\n                },\n                counter: this.state.counter + 1\n            };\n        })\n    }\n\n    toggleLock = (game) => {\n        const stateCopy = {...this.state.messages[game]};\n        stateCopy.locked = !stateCopy.locked\n\n        this.setState(() => {\n            return {\n                ...this.state,\n                messages: {\n                    ...this.state.messages,\n                    [game]: stateCopy\n                }\n            }\n        });\n    }\n\n    // @return: the number of games ahead of this one, after successfully inserting in queue\n    // (i.e. if it's the very next game, return 0; if there's one ahead, return 1; etc)\n    setNextGame = (gameObj) => {\n        let idx = this.state.nextGameIdx;\n\n        // insert next game at next up position by default, but\n        //      *after* any other manually inserted games\n        while (idx < this.state.history.length && this.state.history[idx]?.override) {\n            idx++;\n        }\n\n        this.setState((state) => {\n            return {\n                ...state,\n                history: [\n                    ...state.history.slice(0, Math.max(0, idx)),\n                    {\n                        ...gameObj,\n                        override: true,\n                        time: Date.now()\n                    },\n                    ...state.history.slice(idx)\n                ]\n            }\n        });\n\n        return idx - this.state.nextGameIdx;\n    }\n\n    addGameToQueue = (gameObj) => {\n        // update history + game card highlight color\n        this.setState((state) => {\n            return {\n                ...state,\n                gameSelected: gameObj,\n                history: [\n                    ...this.state.history,\n                    {\n                        ...gameObj,\n                        override: false\n                    }\n                ],\n                messages: {\n                    ...state.messages,\n                    [gameObj.longName]: {\n                        ...state.messages[gameObj.longName],\n                        chosen: true\n                    }\n                }\n            }\n        });\n    }\n\n    clearModal = () => {\n        this.setState({\n            gameSelected: null\n        });\n    }\n\n    onWheelSpun = (gameLongName) => {\n        const gameRequestObj = this.state.messages?.[gameLongName];\n        if (!gameRequestObj) return;\n\n        // send confirmation message in chat\n        const requester = gameRequestObj.username;\n\n        this.addGameToQueue(gameRequestObj);\n\n        // remove card unless it's locked\n        if (!this.state.messages[gameLongName].locked) {\n            setTimeout(() => {\n                this.removeGame(gameLongName);\n                this.clearModal();\n            }, 4000);\n        }\n\n        return this.chatActivity.getStatusPromise(requester).then((status) => {\n            let msg = \"\";\n            switch(status) {\n                case ActivityStatus.DISCONNECTED:\n                    msg = `/me ${gameRequestObj.name} just won the spin, but it doesn't seem like @${requester} is still around. Hope someone else wants to play!`\n                    break;\n\n                case ActivityStatus.ACTIVE:\n                    msg = `/me @${requester}, good news - ${gameRequestObj.name} just won the spin!`;\n                    break;\n\n                case ActivityStatus.IDLE:\n                default:\n                    msg = `/me @${requester}, good news - ${gameRequestObj.name} just won the spin! (I hope you're still around!)`;\n            }\n            return this.messageHandler.sendMessage(msg);\n        })\n\n    }\n\n    removeGame = (gameLongName) => {\n        const newMessageObj = {...this.state.messages};\n        delete newMessageObj[gameLongName];\n        this.setState((state) => {\n            return {\n                ...state,\n                messages: newMessageObj,\n                counter: this.state.counter + 1\n            };\n        })\n    }\n\n    onMessage = (message, user, metadata) => {\n        this.chatActivity.updateLastMessageTime(user);\n    }\n\n    togglePlayerSelect = () => {\n        this.setState((state) => {\n            return {\n                ...state,\n                showPlayerSelect: !state.showPlayerSelect\n            }\n        })\n    }\n\n    routePlayRequest = (user, {sendConfirmationMsg = true, isPrioritySeat = false}) => {\n        const msg = this.state.showPlayerSelect\n            ? this.playerSelector?.handleNewPlayerRequest(user, {isPrioritySeat})\n            : 'sign-ups are currently closed; try again after this game wraps up!'\n\n        if (sendConfirmationMsg) {\n            this.messageHandler?.sendMessage(`/me @${user}, ${msg}`);\n        }\n    }\n\n    routeLeaveRequest = (user) => {\n        this.playerSelector?.removeUser(user);\n    }\n\n    routeOpenQueueRequest = () => {\n        this.setState((state) => {\n            return {\n                ...state,\n                showPlayerSelect: true\n            }\n        })\n        this.playerSelector?.openQueue();\n    }\n\n    routeCloseQueueRequest = () => {\n        this.playerSelector?.closeQueue();\n    }\n\n    routeClearQueueRequest = () => {\n        this.playerSelector?.clearQueue();\n    }\n\n    startGame = () => {\n        // I know this is a big ol' React sin, but I can't for the life of me\n        //   figure out why this.togglePlayerSelect() isn't working... sooo...\n        if (this.state.showPlayerSelect) {\n            this.state.showPlayerSelect = false;\n            this.moveNextGameFwd();\n            return true;\n        }\n        return false;\n    }\n\n    setMessageHandlerRef = (ps) => {\n        this.messageHandler = ps;\n    };\n\n    setPlayerSelectRef = (mh) => {\n        this.playerSelector = mh;\n    };\n\n    renderGameChosenModal(gameObj) {\n        let confettiProps = {\n            force: 0.6,\n            duration: 3500,\n            particleCount: 100,\n            floorHeight: Math.max(window.outerWidth, window.outerHeight),\n            floorWidth: Math.max(window.outerWidth, window.outerHeight)\n        };\n        let requestedBy;\n        if (gameObj.username) {\n            requestedBy = (<h4>requested by @{gameObj.username}</h4>);\n        }\n        return (\n            <>\n                <div className=\"overlay fade-in-out\">\n                    <div className=\"confetti-wrapper\">\n                        <ConfettiExplosion {...confettiProps} />\n                    </div>\n                </div>\n                <div className=\"modal fade-in-out\" onClick={()=>this.removeGame(gameObj.longName)}>\n                    <h1>{gameObj.name}</h1>\n                    {requestedBy}\n                </div>\n            </>\n        );\n    }\n\n    render() {\n        const gameRequestArray = Object.keys(this.state.messages);\n\n\n        let gameSelectedModal;\n        if (this.state.gameSelected) {\n            gameSelectedModal = this.renderGameChosenModal(this.state.gameSelected);\n        }\n\n        let logOutBtn;\n        if (typeof this.props.onLogout === 'function') {\n            logOutBtn = (\n                <button className=\"logout\" onClick={this.props.onLogout}>Logout &#10151;</button>\n            );\n        }\n\n        let mainClassName = this.state.showPlayerSelect ? 'player-select' : 'game-select';\n\n        let subheading = this.state.showPlayerSelect ? (\n            <span className=\"subheading-player\">\n                Type <b>!new</b> in {this.props.channel}'s chat if you want to join the next game\n            </span>\n        ) : (\n            <span className=\"subheading-game\">\n                Type e.g. <b>\"!request Blather Round\"</b> in {this.props.channel}'s chat to add\n            </span>\n        );\n\n        let innerContent;\n        let rightColumn;\n\n        if (this.state.showPlayerSelect) {\n            innerContent = (\n                <PlayerSelect\n                    game={this.state.history?.[this.state.nextGameIdx]}\n                    startGame={this.startGame}\n                    ref={this.setPlayerSelectRef}\n                />\n            );\n        } else {\n            innerContent = gameRequestArray.map((gameName, i) =>\n                <GameRequest\n                    key={i}\n                    gameName={gameName}\n                    metadata={this.state.messages[gameName]}\n                    onDelete={this.removeGame}\n                    toggleLock={this.toggleLock.bind(gameName)}\n                    getActivity={this.chatActivity.getStatusPromise}\n                />\n            );\n            rightColumn = (\n                <div className=\"right-column\" width=\"50px\">\n                    <div className=\"wheel-wrapper\">\n                         <WheelComponent\n                            key={this.state.counter}\n                            segments={gameRequestArray}\n                            segColors={this.state.colors}\n                            onFinished={this.onWheelSpun}\n                            isOnlyOnce={false}\n                            size={250}\n                            upDuration={100}\n                            downDuration={1000}\n                            primaryColor={\"white\"}\n                            contrastColor={\"black\"}\n                            fontFamily={\"Arial\"}\n                        />\n                    </div>\n                </div>\n            );\n        }\n\n\n        return (\n            <div id=\"main-screen\" className={mainClassName}>\n                <MessageHandler\n                    addGameRequest={this.addGameRequest}\n                    setNextGame={this.setNextGame}\n                    changeNextGameIdx={this.changeNextGameIdx}\n                    startGame={this.startGame}\n                    messages={this.state.messages}\n                    channel={this.props.channel}\n                    modList={this.props.modList}\n                    access_token={this.props.access_token}\n                    onMessage={this.onMessage}\n                    onDelete={this.removeGame}\n                    upcomingGames={this.state.history.slice(this.state.nextGameIdx)}\n                    caniplayHandler={this.routePlayRequest}\n                    playerExitHandler={this.routeLeaveRequest}\n                    openQueueHandler={this.routeOpenQueueRequest}\n                    closeQueueHandler={this.routeCloseQueueRequest}\n                    clearQueueHandler={this.routeClearQueueRequest}\n                    ref={this.setMessageHandlerRef}\n                />\n                <div className=\"left-column\">\n                    <h2>{this.state.showPlayerSelect ? 'Seat Requests' : 'Game Requests'}</h2>\n                    <h4>{subheading}</h4>\n                    <div className=\"left-column-body\">\n                        <Sidebar\n                            changeGameOrder={this.changeGameOrder}\n                            history={this.state.history}\n                            nextGameIdx={this.state.nextGameIdx}\n                            changeNextGameIdx={this.changeNextGameIdx}\n                            moveNextGameFwd={this.moveNextGameFwd}\n                            moveNextGameBack={this.moveNextGameBack}\n                            togglePlayerSelect={this.togglePlayerSelect}\n                            requestMode={this.state.showPlayerSelect ? 'seat' : 'game'}\n                        />\n                        <div className=\"left-column-inner-body\">\n                            {innerContent}\n                        </div>\n                    </div>\n                </div>\n                {rightColumn}\n                {logOutBtn}\n                {gameSelectedModal}\n            </div>\n        )\n    }\n}\n","import React, {Component} from 'react';\nimport MainScreen from './MainScreen';\nimport {Redirect, withRouter} from \"react-router-dom\";\nimport queryString from 'query-string'\nconst fetch = require('node-fetch');\n\nclass AuthenticatedApp extends Component {\n    constructor() {\n        super();\n        this.state = {\n            username: localStorage.getItem('__username'),\n            access_token: localStorage.getItem('__access_token'),\n            failed_login: false\n        }\n        this.getAuth = this.getAuth.bind(this);\n        this.logOut = this.logOut.bind(this);\n    }\n    componentDidMount() {\n        this._isMounted = true;\n        if (!this.state.access_token) {\n            return this.getAuth();\n        }\n        return fetch('https://api.twitch.tv/helix/users', {\n            headers: {\n                'Client-ID': process.env.REACT_APP_TWITCH_CLIENT_ID,\n                Authorization: `Bearer ${this.state.access_token}`\n            }\n        })\n        .then(r => r.json())\n        .then(userInfo => {\n            //console.log(userInfo); login [aka lowercase username?], display_name, profile_image_url, description\n            localStorage.setItem('__username', userInfo.data[0].login);\n            return fetch(`https://api.twitch.tv/helix/moderation/moderators?broadcaster_id=${userInfo.data[0].id}`, {\n                headers: {\n                    'Client-ID': process.env.REACT_APP_TWITCH_CLIENT_ID,\n                    Authorization: `Bearer ${this.state.access_token}`\n                }\n            })\n            .then(r => r.json())\n            .then(modInfo => {\n                const modList = (!modInfo.data)\n                    ? null\n                    : modInfo.data.map((modObj) => modObj.user_name.toLowerCase());\n\n                if (this._isMounted) {\n                    this.setState((state) => {\n                        return {\n                            ...state,\n                            username: userInfo.data[0].login,\n                            modList\n                        };\n                    });\n                }\n                return;\n            });\n        })\n        .catch(e => {\n            console.error(e);\n            this.getAuth(e);\n            return;\n        });\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    logOut() {\n        localStorage.removeItem('__username');\n        localStorage.removeItem('__access_token');\n\n        const requestParams = new URLSearchParams({\n            client_id: process.env.REACT_APP_TWITCH_CLIENT_ID,\n            token: this.state.access_token,\n            redirect_uri: process.env.REACT_APP_REDIRECT_URI_NOENCODE\n        });\n\n        fetch(`https://id.twitch.tv/oauth2/revoke?${requestParams}`, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/vnd.twitchtv.v5+json'\n            }\n        }).then(() => {\n            window.location.reload();\n        });\n    }\n\n    async getAuth(e) {\n        if (e) {\n            console.error(e);\n        }\n        localStorage.removeItem('__username');\n        localStorage.removeItem('__access_token');\n\n        const queryParams = queryString.parse(this.props.location.search);\n        const requestParams = new URLSearchParams({\n            grant_type: 'authorization_code',\n            code: queryParams.code,\n            client_id: process.env.REACT_APP_TWITCH_CLIENT_ID,\n            client_secret: process.env.REACT_APP_TWITCH_CLIENT_SECRET,\n            redirect_uri: process.env.REACT_APP_REDIRECT_URI_NOENCODE\n        });\n        return await fetch(`https://id.twitch.tv/oauth2/token?${requestParams}`, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/vnd.twitchtv.v5+json'\n            }\n        })\n        .then(r => r.json())\n        .then((oauth) => {\n            //console.log(oauth);  access_token, refresh_token, expires_in, scope ['...']\n            if (!oauth.access_token) {\n                if (this._isMounted) {\n                    this.setState((state) => {\n                        return {\n                            ...state,\n                            failed_login: true\n                        };\n                    });\n                }\n                return;\n            }\n\n            localStorage.setItem('__access_token', oauth.access_token);\n            if (this._isMounted) {\n                this.setState((state) => {\n                    return {\n                        ...state,\n                        access_token: oauth.access_token\n                    };\n                });\n            }\n\n            return fetch('https://api.twitch.tv/helix/users', {\n                headers: {\n                    'Client-ID': process.env.REACT_APP_TWITCH_CLIENT_ID,\n                    Authorization: `Bearer ${oauth.access_token}`\n                }\n            })\n            .then(r => r.json())\n            .then(userInfo => {\n                //console.log(userInfo); login [aka lowercase username?], display_name, profile_image_url, description\n                localStorage.setItem('__username', userInfo.data[0].login);\n                return fetch(`https://api.twitch.tv/helix/moderation/moderators?broadcaster_id=${userInfo.data[0].id}`, {\n                    headers: {\n                        'Client-ID': process.env.REACT_APP_TWITCH_CLIENT_ID,\n                        Authorization: `Bearer ${this.state.access_token}`\n                    }\n                })\n                .then(r => r.json())\n                .then(modInfo => {\n                    const modList = (!modInfo.data)\n                        ? null\n                        : modInfo.data.map((modObj) => modObj.user_name.toLowerCase());\n                    if (this._isMounted) {\n                        this.setState((state) => {\n                            return {\n                                ...state,\n                                username: userInfo.data[0].login,\n                                modList\n                            };\n                        });\n                    }\n                    return;\n                });\n            });\n        }).catch(e => {\n            if (this._isMounted) {\n                this.setState((state) => {\n                    return {\n                        ...state,\n                        failed_login: true\n                    };\n                });\n            }\n            console.error(e);\n            return;\n        });\n    }\n\n    render() {\n        if (this.state.failed_login) {\n            return (<Redirect to=\"/login\"/>);\n        }\n        let mainContent;\n        if (this.state.username) {\n            mainContent = (\n                <MainScreen\n                    channel={this.state.username}\n                    modList={this.state.modList}\n                    access_token={this.state.access_token}\n                    onLogout={this.logOut}\n                />\n            );\n        }\n\n        return (\n            <div id=\"authenticated-app\">\n                {mainContent}\n            </div>\n        );\n    }\n}\n\nexport {AuthenticatedApp};\n\nexport default withRouter(AuthenticatedApp);\n","import { Component } from 'react';\nimport YAML from 'yaml'\nimport rawJackboxGameList from './JackboxGames.yaml';\nimport './JackboxGameList.css';\nconst fetch = require('node-fetch');\n\nconst PartyPackCard = function (props) {\n  const gameList = Object.keys(props.metadata);\n  return (\n    <div className=\"partyPackCard\">\n      <p className=\"partyPackName\">{props.partyPackName} </p>\n      {gameList.map((gameName, i) =>\n        <GameCard\n          key={i}\n          gameName={gameName}\n          possibleMatches={props.metadata?.[gameName]?.Variants}\n        />\n      )}\n    </div>\n  );\n}\n\n\n// <p> {props.gameName} <p>\n\nconst GameCard = function(props) {\n  return (\n    <div>\n      <p className=\"gameName\">{props.gameName} </p>\n      {props.possibleMatches.map((possibleMatch, i) =>\n        <li className=\"possibleGameMatch\" key={`${props.gameName}-${i}`}>!request {possibleMatch}</li>\n      )}\n    </div>\n  );\n}\n\nexport default class JackboxGameList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      validGames: []\n    };\n  }\n\n  componentDidMount(props) {\n    fetch(rawJackboxGameList)\n      .then(r => r.text())\n      .then(text => {\n        this.setState((state) => {\n          return {\n            ...state,\n            validGames: YAML.parse(text)\n          };\n        });\n      })\n    }\n\n\n\n    render() {\n      const partyPackList = Object.keys(this.state.validGames);\n      return (\n        <div className=\"partyPackList\">\n          {partyPackList.map((partyPackName, i) =>\n            <PartyPackCard\n              key={i}\n              partyPackName={partyPackName}\n              metadata={this.state.validGames[partyPackName]}\n            />\n          )}\n        </div>\n      );\n    }\n\n}\n","import AuthenticatedApp from './AuthenticatedApp';\nimport {HashRouter, Route, Switch} from \"react-router-dom\";\nimport JackboxGameList from './JackboxGameList';\nimport React, {Component} from 'react';\nimport {version} from '../package.json';\n\nimport './App.css';\n\nconst loginScreen = function() {\n    const scopes = 'chat:read chat:edit moderation:read';\n    const loginUrl = 'https://id.twitch.tv/oauth2/authorize'\n        + `?client_id=${process.env.REACT_APP_TWITCH_CLIENT_ID}`\n        + `&response_type=code&scope=${scopes}`\n        + `&redirect_uri=${process.env.REACT_APP_REDIRECT_URI}`;\n\n    return (\n        <div id=\"login-screen\">\n            <a href={loginUrl}>\n                Log In With <strong>Twitch</strong>\n            </a>\n            <br/>\n            <small>\n                {`v${version}`}\n            </small>\n        </div>\n    );\n}\n\nclass App extends Component {\n    render() {\n\n        return (\n            <HashRouter basename='/'>\n                <div className=\"App\">\n                    <header className=\"App-header\">\n                        <Switch>\n                            <Route exact path=\"/login\">\n                                {loginScreen()}\n                            </Route>\n                            <Route exact path=\"/gamelist\" component={JackboxGameList}/>\n                            <Route path=\"/\" component={AuthenticatedApp}/>\n                        </Switch>\n                    </header>\n                </div>\n            </HashRouter>\n        );\n    }\n}\n\nexport default App;\n\nexport {\n    loginScreen as LoginScreen\n};\n","import { ReportHandler } from 'web-vitals';\nimport { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    getCLS(onPerfEntry);\n    getFID(onPerfEntry);\n    getFCP(onPerfEntry);\n    getLCP(onPerfEntry);\n    getTTFB(onPerfEntry);\n  }\n};\n\nexport default reportWebVitals;\n","import App from './App';\nimport {BrowserRouter} from \"react-router-dom\";\nimport React from 'react';\nimport {render} from 'react-dom';\nimport reportWebVitals from './reportWebVitals';\n\nimport './index.css';\n\nrender(\n    <React.StrictMode>\n        <BrowserRouter>\n            <App/>\n        </BrowserRouter>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}